# üéâ AI Implementation!

## How It Works Now

### ü§ñ Each AI Model Has a Unique Personality

| Model | Personality | Strategy | Temperature |
|-------|-------------|----------|-------------|
| **Llama 3.3 70B** | Aggressive & Risk-Taking | Builds monopolies quickly, spends aggressively | 0.8 |
| **Llama 3.1 8B** | Balanced & Strategic | Maintains cash reserves, balanced approach | 0.6 |
| **Mixtral 8x7B** | Conservative & Cautious | Prioritizes cash, avoids risky trades | 0.4 |
| **Gemma 2 9B** | Opportunistic & Tactical | Looks for deals, trades aggressively | 0.7 |
| **DeepSeek R1 70B** | Analytical & Methodical | Makes mathematical ROI-based decisions | 0.5 |
| **Qwen 2.5 32B** | Adaptive & Flexible | Changes strategy based on game state | 0.65 |

### üéÆ What Happens During a Turn

#### Before (Rule-Based):
```typescript
if (money >= price + 50) {
    buy();
} else {
    pass();
}
```

#### Now (AI-Powered):
```typescript
// Send game state to Groq API
const decision = await groq.chat.completions.create({
    model: "llama-3.3-70b-versatile",
    messages: [{
        role: "system",
        content: "You are an aggressive Monopoly player..."
    }, {
        role: "user",
        content: `
            Property: Boardwalk ($400)
            Your Money: $1200
            You own 2/3 properties in this group
            
            Should you BUY or PASS?
        `
    }]
});

// AI responds with reasoning!
{
    "decision": "BUY",
    "reasoning": "Completing the monopoly is worth the investment"
}
```

---

## Testing the Implementation

### 1. Get a Groq API Key

1. Go to [console.groq.com](https://console.groq.com)
2. Sign up (it's free!)
3. Create an API key
4. Copy it (starts with `gsk_...`)

### 2. Start the Game

```bash
npm run dev
```

### 3. Enter Your API Key

When the setup dialog appears:
1. Paste your Groq API key
2. Enter your name
3. Select 3 AI opponents
4. Click "Start Game"

### 4. Watch the AI Play!

You'll see:
- **Real AI decisions** based on game state
- **Unique reasoning** for each move
- **Different strategies** from each model
- **Intelligent chat messages** generated by the AI

---

## Example AI Behavior

### Scenario: Landing on Park Place ($350)

**Llama 3.3 (Aggressive):**
```json
{
    "decision": "BUY",
    "reasoning": "Strategic property in premium group. Worth the investment to build monopoly power."
}
```

**Mixtral (Conservative):**
```json
{
    "decision": "PASS",
    "reasoning": "Price too high relative to current cash reserves. Maintaining financial buffer."
}
```

**DeepSeek R1 (Analytical):**
```json
{
    "decision": "BUY",
    "reasoning": "Expected ROI of 18% based on rent potential and monopoly probability. Positive EV."
}
```

---

## API Usage & Costs

### Groq Pricing (as of 2026)

- **Free Tier**: 30 requests/minute
- **Cost**: $0 for most usage (very generous free tier)
- **Speed**: ~500 tokens/second (super fast!)

### Typical Game Usage

- **Per AI Turn**: 1-2 API calls
- **Per Game**: ~50-100 API calls
- **Cost**: Essentially free on Groq's tier

---

## Troubleshooting

### "API key is required" Error

**Solution**: Make sure you entered your Groq API key in the setup dialog.

### AI Makes Same Decision as Before

**Possible Causes**:
1. API key is invalid
2. Groq API is down (check status.groq.com)
3. Rate limit exceeded (wait 1 minute)

**Fallback**: The code automatically falls back to rule-based logic if the API fails.

### Slow AI Decisions

**Normal**: AI decisions take 1-3 seconds (LLM inference time)
**If slower**: Check your internet connection

---

## Advanced: Customizing AI Personalities

Edit `src/lib/ai/groq-service.ts`:

```typescript
export const MODEL_CONFIGS = {
  'llama-3.3-70b-versatile': {
    name: 'Llama 3.3',
    personality: 'aggressive and risk-taking',  // ‚Üê Change this
    strategy: 'You are an aggressive player...',  // ‚Üê And this
    temperature: 0.8,  // ‚Üê Higher = more creative, Lower = more consistent
  },
  // ... other models
};
```

---

## What's Next?

### Potential Enhancements

1. **AI Trading**: Make AI propose trades to complete monopolies
2. **AI Chat**: Generate contextual chat messages
3. **Learning**: Track which strategies win most often
4. **Difficulty Levels**: Easy/Medium/Hard AI opponents
5. **Multi-Model Debates**: AI players discuss strategy before deciding

---

## Comparison: Before vs After

| Feature | Before | After |
|---------|--------|-------|
| Decision Logic | Hardcoded rules | LLM reasoning |
| Personality | Identical for all | Unique per model |
| Chat Messages | Random templates | AI-generated |
| Strategy | Fixed | Adaptive |
| Reasoning | None | Explained |
| Model Differences | Name only | Real model behavior |

---

## Technical Details

### Architecture

```
User Action
    ‚Üì
Game State Update
    ‚Üì
AI Turn Detected
    ‚Üì
POST /api/ai-decision
    ‚Üì
Groq API Call
    ‚Üì
LLM Decision
    ‚Üì
Game State Update
    ‚Üì
UI Update
```

### API Request Example

```typescript
fetch('/api/ai-decision', {
    method: 'POST',
    body: JSON.stringify({
        apiKey: 'gsk_...',
        action: 'BUY_DECISION',
        context: {
            gameState: { /* full game state */ },
            player: { /* current player */ },
            currentTile: { /* property info */ },
            modelId: 'llama-3.3-70b-versatile'
        }
    })
});
```

### API Response Example

```json
{
    "decision": "BUY",
    "reasoning": "This property completes my monopoly in the orange group, allowing me to build houses and generate significant rent income."
}
```

---

## Verification

To verify it's working:

1. **Check Console**: Open browser DevTools ‚Üí Network tab
2. **Look for**: POST requests to `/api/ai-decision`
3. **Inspect**: Response should have `decision` and `reasoning`
4. **Watch Chat**: AI messages should be contextual, not random

---

## Credits

- **Groq**: Ultra-fast LLM inference
- **Models**: Llama 3.3, Mixtral, Gemma 2, DeepSeek R1, Qwen
- **Framework**: Next.js 15 + React 19
- **UI**: ShadCN + Tailwind CSS

---

## Support

If you encounter issues:

1. Check the browser console for errors
2. Verify your API key is valid
3. Ensure you have internet connection
4. Check Groq API status

---

**Enjoy playing against REAL AI opponents!** üé≤ü§ñ
